# 資科 Final

Created: 2025年5月26日 下午12:52

## 專案目標再定義

你想建立一個**泛用模型**，輸入任一支 AI 股票在某一天的特徵資料，預測「隔日該股票是否上漲」。

️所以每一列是某股票在某日的資訊，模型是「跨股票、跨日期」訓練的分類模型。

------------------------------------------------------------------------

## 完整前處理規劃

------------------------------------------------------------------------

### 🔹 1. 每一檔股票先個別進行處理（以下為每支股票處理步驟）

### a. 讀取原始資料

> 遇到 date 欄位格式轉換問題: 民國年要先轉成西元才可用date type

| 欄位名稱 | 類型      | 說明                                                |
|----------|-----------|-----------------------------------------------------|
| `date`   | `Date`    | 交易日期，格式為 `%Y-%m-%d`，原始為民國年（需轉換） |
| `volume` | `numeric` | 成交股數，代表該日的總交易量（單位：股）            |
| `value`  | `numeric` | 成交金額，代表該日成交總值（單位：新台幣元）        |
| `open`   | `numeric` | 開盤價，該日的第一筆成交價格                        |
| `high`   | `numeric` | 最高價，該日成交的最高價                            |
| `low`    | `numeric` | 最低價，該日成交的最低價                            |
| `close`  | `numeric` | 收盤價，該日的最後一筆成交價格                      |
| `change` | `numeric` | 漲跌價差（收盤價與前一日的差值）                    |
| `trades` | `numeric` | 成交筆數，表示當日交易發生的次數                    |

### b. 加入股票識別欄位 (未加入)

### c. 計算技術指標

| 欄位名稱 | 類型 | 說明 |
|------------------------|------------------------|------------------------|
| `rsi14` | `numeric` | 相對強弱指標（Relative Strength Index），以 14 日週期計算。用於衡量股價超買/超賣。範圍 0–100，常用閾值為 30/70。 |
| `ma5` | `numeric` | 5 日移動平均線（Moving Average），可平滑價格波動，觀察趨勢。 |
| `macd_diff` | `numeric` | MACD 指標的差異值，計算為 `MACD - Signal`，反映短期與長期動能的變化趨勢。 |
| `volume_change` | `numeric` | 成交量變化率，計算方式為 `(volume - lag(volume)) / lag(volume)`，觀察成交熱度變化。 |
| `return_pct` | `numeric` | 收盤日報酬率，計算為 `(close - lag(close)) / lag(close)`，即今日與昨日收盤價的相對變動。 |
| `gap_pct` | `numeric` | 開盤跳空百分比，計算為 `(open - lag(close)) / lag(close)`，評估市場跳空開盤的幅度。 |

### d. 建立 target 標籤

| 欄位名稱 | 類型 | 說明 |
|------------------------|------------------------|------------------------|
| `target` | `integer (0/1)` | 二元分類標籤，用於預測隔日是否上漲。`1` 表示隔日收盤價高於今日收盤價，`0` 表示否。 |

------------------------------------------------------------------------

### 🔹 2. 多股票資料合併

| 資料量 | 51337 筆 | 已清除NA值約 1700 筆，為計算開頭的值 |
|--------|----------|--------------------------------------|
| 欄位   | 16       | 包含以上欄位，並未把股票名加入欄位   |

------------------------------------------------------------------------

### 🔹 3. 標準化

### a. 標準化數值欄位

------------------------------------------------------------------------

## 小結: pipeline

```         
for 股票 in 股票清單:
    下載資料 → 計算技術指標 → 建立 target  → 清洗
合併全部 → 儲存csv → 標準化 → 儲存csv
```
